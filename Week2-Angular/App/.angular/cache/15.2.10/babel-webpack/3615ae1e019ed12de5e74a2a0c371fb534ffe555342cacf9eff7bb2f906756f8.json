{"ast":null,"code":"import * as i0 from \"@angular/core\";\nexport class MovieService {\n  constructor() {\n    this.movies = [{\n      Title: \"Guardians of the Galaxy Vol. 2\",\n      Year: \"2017\",\n      Runtime: \"136 min\",\n      Genre: \"Action, Adventure, Comedy\",\n      Actors: \"Chris Pratt, Zoe Saldana, Dave Bautista\",\n      Plot: \"The Guardians struggle to keep together as a team while dealing with their personal family issues, notably Star-Lord's encounter with his father, the ambitious celestial being Ego.\",\n      Poster: \"https://m.media-amazon.com/images/M/MV5BNjM0NTc0NzItM2FlYS00YzEwLWE0YmUtNTA2ZWIzODc2OTgxXkEyXkFqcGdeQXVyNTgwNzIyNzg@._V1_SX300.jpg\",\n      Rating: [9.0]\n    }, {\n      Title: \"The Nun\",\n      Year: \"2018\",\n      Runtime: \"96 min\",\n      Genre: \"Horror, Mystery, Thriller\",\n      Actors: \"Demián Bichir, Taissa Farmiga, Jonas Bloquet\",\n      Plot: \"A priest with a haunted past and a novice on the threshold of her final vows are sent by the Vatican to investigate the death of a young nun in Romania and confront a malevolent force in the form of a demonic nun.\",\n      Poster: \"https://m.media-amazon.com/images/M/MV5BMjM3NzQ5NDcxOF5BMl5BanBnXkFtZTgwNzM4MTQ5NTM@._V1_SX300.jpg\",\n      Rating: [8.0]\n    }, {\n      Title: \"Cast Away\",\n      Year: \"2000\",\n      Runtime: \"143 min\",\n      Genre: \"Adventure, Drama, Romance\",\n      Actors: \"Tom Hanks, Helen Hunt, Paul Sanchez\",\n      Plot: \"A FedEx executive undergoes a physical and emotional transformation after crash landing on a deserted island.\",\n      Poster: \"https://m.media-amazon.com/images/M/MV5BN2Y5ZTU4YjctMDRmMC00MTg4LWE1M2MtMjk4MzVmOTE4YjkzXkEyXkFqcGdeQXVyNTc1NTQxODI@._V1_SX300.jpg\",\n      Rating: [8.5]\n    }];\n    localStorage[\"movies\"] = JSON.stringify(this.movies);\n  }\n  ngOnInit() {}\n  getMovies() {\n    let moviesDb = localStorage.getItem(\"movies\");\n    if (moviesDb != null) {\n      this.movies = JSON.parse(moviesDb);\n    } else {\n      moviesDb = '';\n      this.movies = JSON.parse(moviesDb);\n    }\n    return this.movies;\n  }\n  addMovie(movie) {\n    let moviesDb = localStorage.getItem(\"movies\");\n    if (moviesDb != null) {\n      this.movies = JSON.parse(moviesDb);\n    } else {\n      moviesDb = '';\n      this.movies = JSON.parse(moviesDb);\n    }\n    this.movies.push(movie);\n    localStorage.setItem(\"movies\", JSON.stringify(this.movies));\n  }\n  getAverageRating(movie) {\n    let total = 0;\n    let average = 0;\n    if (movie.Rating != undefined) {\n      movie.Rating.forEach(element => {\n        total += element;\n      });\n      average = total / movie.Rating.length;\n    }\n    ;\n    return average;\n  }\n  deleteMovie(movie) {\n    let moviesDb = localStorage.getItem(\"movies\");\n    if (moviesDb != null) {\n      this.movies = JSON.parse(moviesDb);\n    } else {\n      moviesDb = '';\n      this.movies = JSON.parse(moviesDb);\n    }\n    this.movies = this.movies.filter(obj => obj.Title != movie.Title);\n    localStorage.setItem(\"movies\", JSON.stringify(this.movies));\n    return this.movies;\n  }\n  static #_ = this.ɵfac = function MovieService_Factory(t) {\n    return new (t || MovieService)();\n  };\n  static #_2 = this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: MovieService,\n    factory: MovieService.ɵfac,\n    providedIn: 'root'\n  });\n}","map":{"version":3,"mappings":"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","names":["MovieService","constructor","Title","Year","Runtime","Genre","Actors","Plot","Poster","Rating","localStorage","JSON","stringify","movies","ngOnInit","getMovies","moviesDb","getItem","parse","addMovie","movie","push","setItem","getAverageRating","total","average","undefined","forEach","element","length","deleteMovie","filter","obj","factory","providedIn"],"sourceRoot":"","sources":["C:\\Facultate\\Internship\\Week2-Angular\\Ex2-MovieApp\\src\\app\\services\\movie.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { movie } from '../models/movie';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class MovieService {\n\n  constructor() {\n\n    localStorage[\"movies\"] = JSON.stringify(this.movies);\n\n  }\n  ngOnInit(): void {\n\n\n  }\n  movies: movie[] = [\n    {\n      Title: \"Guardians of the Galaxy Vol. 2\",\n      Year: \"2017\",\n      Runtime: \"136 min\",\n      Genre: \"Action, Adventure, Comedy\",\n      Actors: \"Chris Pratt, Zoe Saldana, Dave Bautista\",\n      Plot: \"The Guardians struggle to keep together as a team while dealing with their personal family issues, notably Star-Lord's encounter with his father, the ambitious celestial being Ego.\",\n      Poster: \"https://m.media-amazon.com/images/M/MV5BNjM0NTc0NzItM2FlYS00YzEwLWE0YmUtNTA2ZWIzODc2OTgxXkEyXkFqcGdeQXVyNTgwNzIyNzg@._V1_SX300.jpg\",\n      Rating: [9.0]\n    },\n    {\n      Title: \"The Nun\",\n      Year: \"2018\",\n      Runtime: \"96 min\",\n      Genre: \"Horror, Mystery, Thriller\",\n      Actors: \"Demián Bichir, Taissa Farmiga, Jonas Bloquet\",\n      Plot: \"A priest with a haunted past and a novice on the threshold of her final vows are sent by the Vatican to investigate the death of a young nun in Romania and confront a malevolent force in the form of a demonic nun.\",\n      Poster: \"https://m.media-amazon.com/images/M/MV5BMjM3NzQ5NDcxOF5BMl5BanBnXkFtZTgwNzM4MTQ5NTM@._V1_SX300.jpg\",\n      Rating: [8.0]\n    },\n    {\n      Title: \"Cast Away\",\n      Year: \"2000\",\n      Runtime: \"143 min\",\n      Genre: \"Adventure, Drama, Romance\",\n      Actors: \"Tom Hanks, Helen Hunt, Paul Sanchez\",\n      Plot: \"A FedEx executive undergoes a physical and emotional transformation after crash landing on a deserted island.\",\n      Poster: \"https://m.media-amazon.com/images/M/MV5BN2Y5ZTU4YjctMDRmMC00MTg4LWE1M2MtMjk4MzVmOTE4YjkzXkEyXkFqcGdeQXVyNTc1NTQxODI@._V1_SX300.jpg\",\n      Rating: [8.5]\n    }\n  ]\n\n  getMovies(): any[] {\n    let moviesDb = localStorage.getItem(\"movies\");\n    if (moviesDb != null) {\n      this.movies = JSON.parse(moviesDb);\n    } else {\n      moviesDb = '';\n      this.movies = JSON.parse(moviesDb);\n    }\n    return this.movies;\n  }\n  addMovie(movie: movie): void {\n    let moviesDb = localStorage.getItem(\"movies\");\n    if (moviesDb != null) {\n      this.movies = JSON.parse(moviesDb);\n    } else {\n      moviesDb = '';\n      this.movies = JSON.parse(moviesDb);\n    }\n\n    this.movies.push(movie);\n    localStorage.setItem(\"movies\", JSON.stringify(this.movies));\n\n  }\n\n  getAverageRating(movie:movie){\n    let total=0;\n    let average=0;\n    if(movie.Rating!=undefined){\n      movie.Rating.forEach(element => {\n        total+=element\n    })\n    average=total/movie.Rating.length;\n    };\n    return average;\n  }\n\n\n  deleteMovie(movie: movie) {\n    let moviesDb = localStorage.getItem(\"movies\");\n    if (moviesDb != null) {\n      this.movies = JSON.parse(moviesDb);\n    } else {\n      moviesDb = '';\n      this.movies = JSON.parse(moviesDb);\n    }\n    this.movies = this.movies.filter(obj => obj.Title != movie.Title);\n    localStorage.setItem(\"movies\", JSON.stringify(this.movies));\n    return this.movies;\n  }\n\n\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}